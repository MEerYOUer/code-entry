var code;function attendance(answer){if(answer==="yes"){$("#yes").attr({class:"selected boolean-input"});$("#no").attr({class:"boolean-input"});$("[id*=submit]").addClass("complete");$("[id*=submit]").attr({disabled:false,style:"opacity: 100%"});$("[id*=submit]").attr({onclick:"submitAttendance();"})}else{$("#no").attr({class:"selected boolean-input"});$("#yes").attr({class:"boolean-input"});$("[id*=submit]").addClass("complete");$("[id*=submit]").attr({disabled:false,style:"opacity: 100%"});$("[id*=submit]").attr({onclick:"submitAttendance();"})}}function submitAttendance(){var attending=$(".selected").val();if(attending==="Yes"){$("[class*=boolean-input]").attr({style:"display: none;"});$("[class*=code-input]").attr({style:"width: 250px"});$("[id*=submit]").removeClass("complete");$("[id*=submit]").attr({disabled:true,style:"opacity: 25%"});$("[id*=form-label]").html("How many guests are you bringing?").attr({style:"color: black; text-align: center;"}).append($("<h4 />").html("(Including yourself)"));$("[class*=code-input]").val("");$("[class*=code-input]").attr({id:"guest-input",oninput:"validate('guests');",type:"text",maxlength:"1",style:"width: 100px;"});$("[class*=code-input]").focus();$("[id*=submit]").attr({onclick:"submitGuestCount();"})}else if(attending==="No"){var url="api/rsvp";var postData={attending:false,code:code};$.ajax({type:"POST",contentType:" application/json",url:url,data:JSON.stringify(postData),success:function(data){$("[id*=form-content]").empty();$("[id*=form-content]").append($("<img />").attr({id:"img-confetti",src:"public/assets/img/checkmark.svg",style:"width: 150px; margin: 50px 0 50px 0;"})).append($("<h1 />").attr({class:"accept-h1",style:"color: black; text-align: center;"}).html("Thanks! Your RSVP has been recieved.")).append($("<h1 />").attr({class:"accept-h1",style:"color: black; text-align: center;"}).html("You will be missed!"))},error:function(xhr,status,error){var errorMessage=xhr.status+": "+xhr.statusText;console.log(errorMessage);$("[id*=form-label]").html("Internal server error. Please try again later.").attr({style:"color: red; text-align: center;"});$("[class*=code-input]").attr({style:"border-color: red; width: 100px;"});$("[id*=form-label]").effect("shake")},async:true})}}function validate(stage){var inputComplete;if(stage==="code"){var ids=["digit1","digit2","digit3","digit4","digit5"];var singleInput;code="";ids.forEach(function(item,i){singleInput=$("[id*="+ids[i]).val();if(singleInput){code+=singleInput}});(code.length===5)?inputComplete=true:inputComplete=false}else if(stage==="guests"){var element=$("[id*=guest-input]");var input=element.val();if(input){if(isNaN(input)){$("[id*=form-label]").html("Numeric values only.").attr({style:"color: red; text-align: center;"});$("[class*=code-input]").attr({style:"border-color: red; width: 100px;"});inputComplete=false}else{if(input<1){$("[id*=form-label]").html("Values must be greater than 0.").attr({style:"color: red; text-align: center;"});$("[class*=code-input]").attr({style:"border-color: red; width: 100px;"});inputComplete=false}else{$("[id*=form-label]").html("How many guests are you bringing?").attr({style:"color: black; text-align: center;"}).append($("<h4 />").html("(Including yourself)"));$("[class*=code-input]").attr({style:"border-color: rgb(0, 183, 255); width: 100px;"});inputComplete=true}}}}if(inputComplete){$("[id*=submit]").addClass("complete");$("[id*=submit]").attr({disabled:false,style:"opacity: 100%"})}else{$("[id*=submit]").removeClass("complete");$("[id*=submit]").attr({disabled:true,style:"opacity: 20%"})}}function submitCode(){var url="api/code";postData={code:code};$.ajax({type:"POST",contentType:" application/json",url:url,data:JSON.stringify(postData),success:function(isCodeValid){if(isCodeValid){$("[class*=code-input]").attr({style:"display: none;"});$("[id*=form-label]").html("Are you planning to attend?").attr({style:"color: black; text-align: center;"});$("[class*=boolean-input]").attr({style:""});$("[id*=submit]").removeClass("complete");$("[id*=submit]").attr({disabled:true,style:"opacity: 25%"})}else{$("[id*=form-label]").html("Invalid code.").attr({style:"color: red; text-align: center;"});$("[id*=form-label]").effect("shake")}},error:function(xhr,status,error){var errorMessage=xhr.status+": "+xhr.statusText;console.log(errorMessage);$("[id*=form-label]").html("Internal server error. Please try again later.").attr({style:"color: red; text-align: center;"});$("[class*=code-input]").attr({style:"border-color: red; width: 100px;"});$("[id*=form-label]").effect("shake")},async:true})}function submitGuestCount(){var url="api/rsvp";var guestCount=$("[id*=guest-input]").val();postData={code:code,guestCount:guestCount};$.ajax({type:"POST",contentType:" application/json",url:url,data:JSON.stringify(postData),success:function(data){$("[id*=form-content]").empty();$("[id*=form-content]").append($("<img />").attr({id:"img-confetti",src:"public/assets/img/confetti.svg",style:"width: 200px; margin: 50px 0 50px 0;"})).append($("<h1 />").attr({class:"accept-h1",style:"color: black; text-align: center;"}).html("Thanks! Your RSVP has been recieved.")).append($("<h1 />").attr({class:"accept-h1",style:"color: black; text-align: center;"}).html("See you at the party!"));$("[id*=page-content]").prepend($("<div />").attr({class:"pyro",style:"width: 100%;"}));$("[class*=pyro]").append($("<div />").attr({class:"before"}));$("[class*=pyro]").append($("<div />").attr({class:"after"}))},error:function(xhr,status,error){var errorMessage=xhr.status+": "+xhr.statusText;console.log(errorMessage);$("[id*=form-label]").html("Internal server error. Please try again later.").attr({style:"color: red; text-align: center;"});$("[class*=code-input]").attr({style:"border-color: red; width: 100px;"});$("[id*=form-label]").effect("shake")},async:true})}$(document).ready(function(){$("[class*=code-input]").val("");$("[class*=code-input]").keypress(function(event){if((event.keyCode==13||event.which==13)&&$("[id*=submit]").hasClass("complete")){$("[id*=submit]").click()}})});